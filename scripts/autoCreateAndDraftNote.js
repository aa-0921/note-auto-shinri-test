// autoCreateAndDraftNote.js
// 薄いラッパー：既存のCLI引数・動作は維持しつつ、実装は共有ライブラリに委譲

import { runWithCore } from '@aa-0921/note-auto-core';

(async () => {
  await runWithCore(async ({ core, wantsBackground }) => {
    // アカウント固有の題材・切り口（ここで管理）
    const topics = [
      '恋愛タイプ診断',
      '第一印象でわかる性格診断',
      '直感力テスト',
      'コミュ力診断',
      'メンタル回復力（レジリエンス）診断',
      '自己肯定感セルフチェック',
      '嫉妬心の扱い方診断',
      'ストレス耐性テスト',
      '対人距離の取り方診断',
      '依存傾向セルフチェック',
      'HSP傾向のセルフ診断',
      '感情コントロール力診断',
      '衝動性セルフチェック',
      '職場コミュニケーション診断',
      '恋の駆け引きスキル診断',
      '思考のクセ（認知）チェック',
      '習慣化タイプ診断',
      'マインドフルネス適性テスト',
      '断れない度チェック',
      '安心感の源泉診断',
    ];

    const patterns = [
      '4択診断（A/B/C/Dを選ぶ）',
      // '直感で選ぶ二択→分岐して4タイプに',
      '色でわかる4タイプ診断',
      '動物でわかる4タイプ診断',
      '食べ物の好みでわかる4タイプ診断',
      '第一印象で選ぶ4つのシーン診断',
      '休日の過ごし方でわかる4タイプ診断',
      'メッセージの返信でわかる4タイプ診断',
      '行動の優先度でわかる4タイプ診断',
      '理想のデートでわかる4タイプ診断',
    ];

    const rewriteConditionsLines = [
      'あなたは男性の心理カウンセラーです。',
      '心理学・脳科学・行動科学の専門知識を活用し、科学的根拠に基づいた説得力のある解説を提供してください。',
      'やさしい口調（です・ます）で、心理テストの問題文や解説を自然に厚く整えてください。',
      '【注意】',
      '- タイトルや見出しは出力せず、本文のみを返す。',
      '- メタ情報（追加要素や文字数など）は一切出力しない。',
      '- 絵文字を各行に1つ程度。',
      '- noteのMarkdownのみ使用。',
      '- 箇条書きは「・ 」、番号付きリストは使わない。',
      '- 問題文と答え・解説の間に長めの空行を挿入してワクワク感を演出。',
      '- 解説では心理学的根拠や脳科学の知見を含めて、読者が「なるほど」と納得できる内容にしてください。',
      '- 専門用語は使わず、「心理学では」「脳科学では」といった表現で分かりやすく説明してください。',
      '- アドバイスは実践的で具体的な行動指針を含めてください。',
    ];

    // LLM用システムプロンプト（参考実装に準拠）
    const systemMessage = 'あなたは日本語のnote向け心理テスト作成者で、男性の心理カウンセラーです。心理学・脳科学・行動科学の知識を活用し、科学的根拠に基づいた説得力のある解説と実践的なアドバイスを提供します。やさしい口調で読者が楽しく回答でき、かつ「なるほど」と納得できる高品質なコンテンツを作ります。';

    // 記事生成プロンプト条件（参考実装の「promptLines」相当）
    const articleConditionsLines = [
      'タイトル、本文、ハッシュタグ（#から始まるもの）を含めてください。',
      'タイトルは1行目に「# [実際のタイトル]」として記載してください。',
      '「# タイトル」という文字列ではなく、実際の記事タイトルを入れてください。',
      'タイトルの最後に必ず「【心理テスト】」を付けてください。',
      '本文にはタイトルを含めないでください。',
      '本文は次の簡潔な構成で作成してください。',
      '1) 問題文（1〜2行）',
      '2) 関連する科学的解説セクション（2〜3行の解説文）',
      '選択肢の直前に、記事タイトルや心理テスト内容に関連する豆知識を必ず挿入してください。',
        '解説は記事のテーマに応じて適切な内容を含めてください（下記は例）：',
        '・感情コントロール関連：「感情をコントロールする脳の働き」「ストレスへの反応の仕組み」「気持ちを落ち着ける方法」',
        '・第一印象関連：「一瞬での判断の速さ」「視覚的な記憶の特徴」「無意識に作られる先入観」',
        '・直感力関連：「直感の判断力の精度」「潜在的な意識の働き」「思い出や経験による自動的な判断」',
        '・コミュニケーション関連：「人との距離感」「言葉や表情でのコミュニケーション」「社会での認識の仕組み」',
        '・その他：記事テーマに合った心理学的・脳科学的な豆知識',
        '【重要】専門用語（前頭前野、扁桃体、デフォルトモードネットワークなど）は使用せず、',
        '「脳科学の研究結果では」「心理学では」「研究によると」といった表現で分かりやすく説明してください。',
      '3) 選択肢（A/B/C/Dの4択、各1行）',
      '選択肢の直前に、次のガイド文を1行で必ず表示してください：「深呼吸して、A〜Dの中から心のままにひとつ選んでください✨」',
      '問題文には、記事タイトルに対応した明確な選択基準を含めてください（例：「あなたが最初に目に入った景色はどれですか？」「あなたが自分に似ていると思う動物はどれですか？」など）。',
      '4) 結果セクション（A/B/C/Dごとに「結果・解説・アドバイス」を必ず含める）',
      '各タイプの「解説」と「アドバイス」は、それぞれ200文字程度、最低5文で具体的に書いてください。',
      '「解説」には心理学的な根拠や研究結果を織り交ぜて、読者が「なるほど」と納得できる内容にしてください。',
      '解説では以下の要素を含めてください：',
      '・性格心理学や行動心理学の観点からの説明',
      '・脳科学や神経科学の知見（例：「感情をコントロールする脳の働き」「気分を良くする脳内物質の分泌」など）',
      '・認知バイアスや思考パターンの説明',
      '・人間関係やコミュニケーションにおける特徴',
      '【重要】専門用語（デフォルトモード・ネットワーク、前頭前野、ドーパミン、扁桃体など）は使わず、',
      '「心理学では」「脳科学では」「研究によると」といった表現で分かりやすく説明してください。',
      '「アドバイス」は実践的で具体的な行動指針を含め、読者の日常に活かせる内容にしてください。',
      'アドバイスでは以下の要素を含めてください：',
      '・具体的な行動改善方法（例：「朝の10分間の瞑想を習慣にする」）',
      '・人間関係の改善策（例：「相手の話を最後まで聞いてから意見を述べる」）',
      '・ストレス対処法やメンタルケアの方法',
      '・長期的な成長につながる習慣の提案',
      '問題文と「結果」セクションの間に2〜3行の空行を入れてワクワク感を演出してください。',
      '結果セクションでは各タイプの境界を明確にするため、各タイプの冒頭に「―――― A ――――」のような区切り線を入れてください（B/C/Dも同様）。',
      '「解説」「アドバイス」で箇条書きを使用する場合は、各項目を改行して見やすくしてください。',
      '各タイプの書式は厳守（1行1項目・改行で区切る／ラベルは太字）：',
      '―――――――― A ――――――――',
      '**結果**：...',
      '**解説**：...',
      '**アドバイス**：...',
      '―――――――― B ――――――――',
      '**結果**：...',
      '**解説**：...',
      '**アドバイス**：...',
      '―――――――― C ――――――――',
      '**結果**：...',
      '**解説**：...',
      '**アドバイス**：...',
      '―――――――― D ――――――――',
      '**結果**：...',
      '**解説**：...',
      '**アドバイス**：...',
      '絵文字は落ち着いたものを各行に1つ程度（例：🌙 🍃 ✨ 🕊️）。',
      'すべて日本語で出力してください。',
      'noteの正しいマークダウン記法のみを使ってください。',
      '箇条書きはマークダウンではなく、「・ 」で表現してください。',
      '見出しはh2（## 見出し）・h3（### 見出し）のみ。',
      '見出しに「**」等は使わないでください。',
      '番号付きリストは使わないでください。',
      'h1（# タイトル）はタイトル行のみで本文中では使わないでください。',
      'その他のマークダウンやHTMLタグは使わないでください。',
    ];

    // タグ生成の指示文（参考実装：固定タグの必須含有を要求）
    const tagsInstruction =
      '記事内容から最も関連する日本語タグを3〜5個生成し、半角スペース区切りで出力してください。必ず「#心理テスト #診断 #性格診断 #PR」を含めてください。本文や説明は禁止。';

    // タイトル装飾用絵文字（参考実装のセット）
    const titleEmojis = [
      '🌙',
      '🌕',
      '🌜',
      '⭐',
    ];

    // Kindleアフィリエイト設定（直接指定）
    const affiliateTag = 'note-shinri-test-22';
    const kindleAffiliateEnabled = true;

    // 記事内に挿入するアフィリエイト文（複数バリエーション）
    const affiliateLinks = [
      [
        '',
        '🌙　🍵　🌿　🍵　🌙　🍵　🌿　🍵　🌙　🍵　🌿　🍵　🌙　🍵　🌿　🍵　🌙　🍵',
        'https://amzn.to/3VxZ0FG',
        '心を落ち着かせて、健康にも良いあずき茶をおすすめします。',
        'ゆったり過ごしたい夜に、静かに寄り添う一杯をどうぞ。🍃',
        '香りは濃く香ばしく、癖がなく飲みやすいです。',
        '甘い香りとやさしい甘みで、毎日でも続けやすい味わいです。🍵',
        '活性酸素を抑える働きが期待でき、からだ想いの一杯です。✨',
        '🌙　🍵　🌿　🍵　🌙　🍵　🌿　🍵　🌙　🍵　🌿　🍵　🌙　🍵　🌿　🍵　🌙　🍵',
        '',
      ].join('\n'),

      // ----一旦note-auto-renaiと同じものを使用-----------
      // ----↓できれば個々の商品でアフィリエイトリンクも個々のものにしたい-----------
      [
        '',
        '📖　✨　📖　✨　📖　✨　📖　✨　📖　✨　📖　✨　📖　✨　📖　✨',
        'https://amzn.to/4goaSUk',
        '最近話題の引き寄せの法則😊結構面白いのでおすすめです😊',
        '📖　✨　📖　✨　📖　✨　📖　✨　📖　✨　📖　✨　📖　✨　📖　✨',
        '',
      ].join('\n'),

      [
        '',
        '💧　✨　💧　✨　💧　✨　💧　✨　💧　✨　💧　✨　💧　✨　💧　✨',
        'https://amzn.to/3WcMnzT',
        '1本あたり約50円とかなり安いので、この機会に水分補給を日課にしてはどうでしょうか😊',
        '💧　✨　💧　✨　💧　✨　💧　✨　💧　✨　💧　✨　💧　✨　💧　✨',
        '',
      ].join('\n'),

      [
        '',
        '🥤　✨　🥤　✨　🥤　✨　🥤　✨　🥤　✨　🥤　✨　🥤　✨　🥤　✨',
        'https://amzn.to/46DCvEs',
        '👆炭酸は血行促進で疲労回復や美肌づくりをサポートする効果があります⭕',
        '胃を刺激して満腹感を与え、腸の働きを活発にしてダイエットや便秘解消にも役立ちます👌',
        '🥤　✨　🥤　✨　🥤　✨　🥤　✨　🥤　✨　🥤　✨　🥤　✨　🥤　✨',
        '',
      ].join('\n'),

      [
        '',
        '🍅　✨　🍅　✨　🍅　✨　🍅　✨　🍅　✨　🍅　✨　🍅　✨　🍅　✨',
        'https://amzn.to/4pAZwAB',
        '👆トマトジュースにはリコピンなど豊富な栄養素が含まれています🎉',
        '生活習慣病予防や美肌、むくみ改善、ダイエットサポートに役立ち、手軽に栄養補給できます！！💪',
        '🍅　✨　🍅　✨　🍅　✨　🍅　✨　🍅　✨　🍅　✨　🍅　✨　🍅　✨',
        '',
      ].join('\n'),

      [
        '',
        '🍵　✨　🍵　✨　🍵　✨　🍵　✨　🍵　✨　🍵　✨　🍵　✨　🍵　✨',
        'https://amzn.to/4nOiNN9',
        '👆濃い緑茶には茶カテキンが豊富で、体脂肪減少や血糖値上昇抑制、動脈硬化や認知症予防など多くの健康効果が期待できます㊙️',
        '🍵テアニンによるリラックス作用もあり、心身のバランスを整える飲み物です🍵',
        '🍵　✨　🍵　✨　🍵　✨　🍵　✨　🍵　✨　🍵　✨　🍵　✨　🍵　✨',
        '',
      ].join('\n'),

      [
        '',
        '🍫　✨　🍫　✨　🍫　✨　🍫　✨　🍫　✨　🍫　✨　🍫　✨　🍫　✨',
        'https://amzn.to/48uTL0X',
        '👆プロテインバーは筋肉維持・増強やダイエットサポート、美容や免疫力向上などに役立ち、効率的にタンパク質を補給できるのが魅力です💪',
        'コンビニより安く、忙しい時でもスピーディーに栄養補給ができ、健康維持や体づくりをサポートします🌸',
        '🍫　✨　🍫　✨　🍫　✨　🍫　✨　🍫　✨　🍫　✨　🍫　✨　🍫　✨',
        '',
      ].join('\n'),

      [
        '',
        '🍚　✨　🍚　✨　🍚　✨　🍚　✨　🍚　✨　🍚　✨　🍚　✨　🍚　✨',
        'https://amzn.to/42KiV8b',
        '👆発芽米は玄米よりビタミン・ミネラル・食物繊維が豊富で、GABAによるストレス緩和や血圧降下作用など健康効果が期待できます🍚',
        '🍚お米の値段も上がっている今、どうせなら体に優しい発芽米を選んで美味しく健康に💊',
        '🍚　✨　🍚　✨　🍚　✨　🍚　✨　🍚　✨　🍚　✨　🍚　✨　🍚　✨',
        '',
      ].join('\n'),

      // -↓↓↓-------心理テストアカウント リンクーーーーーーーーーーーーーーーーーーーーーー

      [
        '',
        '🧠　💭　🧠　💭　🧠　💭　🧠　💭　🧠　💭　🧠　💭　🧠　💭　🧠　💭',
        'https://amzn.to/4mBgoEo',
        '思い通りに人を動かすヤバい話し方',
        '👆マルチ商法トップセールスから人気YouTuberになった著者が相手を思い通りに動かすために必要な話し方を解説🕶️',
        'ちょっとやばめな内容で、悪用厳禁！面白かったです🕶️',
        '洗脳スキル・ポジショニング・印象操作・話し方や聞き方のコツ',
        '🧠　💭　🧠　💭　🧠　💭　🧠　💭　🧠　💭　🧠　💭　🧠　💭　🧠　💭',
        '',
      ].join('\n'),

      [
        '',
        '📚　🧠　📚　🧠　📚　🧠　📚　🧠　📚　🧠　📚　🧠　📚　🧠　📚　🧠',
        'https://amzn.to/4pLGmIe',
        '基本がわかる　心理学の教科書　高校生からめざそう心理学検定2級',
        '👆幅広い心理学の世界を見通しよく学べる入門書です😊',
        'はじめて興味を持った高校生、学びを深めたい大学生・社会人に最適です👍',
        '心理学検定を受けない方にとっても心理学を広く学ぶことができます。',
        '📚　🧠　📚　🧠　📚　🧠　📚　🧠　📚　🧠　📚　🧠　📚　🧠　📚　🧠',
        '',
      ].join('\n'),

      [
        '',
        '💪　💕　💪　💕　💪　💕　💪　💕　💪　💕　💪　💕　💪　💕　💪　💕',
        'https://amzn.to/46G2M4Z',
        '嫌われる勇気',
        '👆「あの人」の期待を満たすために生きてはいけない',
        '有名な本で聞いたことがある人も多いのではないでしょうか😊',
        '人生の悩みの多くは人間関係が原因で、他人の評価を気にせず承認欲求から自由になる「嫌われる勇気」を持つことで、他人の人生ではなく自分自身の人生を生きることが幸福につながる🎉',
        '💪　💕　💪　💕　💪　💕　💪　💕　💪　💕　💪　💕　💪　💕　💪　💕',
        '',
      ].join('\n'),
      // -↑↑↑-------心理テストアカウント リンクーーーーーーーーーーーーーーーーーーーーーー
      

      // ーーーリンクの形式をIDが含まれるものに変更ーーーーーーーーー

      [
        '',
        '🦶　👟　🦶　👟　🦶　👟　🦶　👟　🦶　👟　🦶　👟　🦶　👟　🦶',
        `https://www.amazon.co.jp/%E3%83%8B%E3%83%A5%E3%83%BC%E3%83%90%E3%83%A9%E3%83%B3%E3%82%B9-%E3%82%A4%E3%83%B3%E3%82%BD%E3%83%BC%E3%83%AB-%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%86%E3%82%A3%E3%83%96%E3%83%AA%E3%83%90%E3%82%A6%E3%83%B3%E3%83%89%E3%82%A4%E3%83%B3%E3%82%BD%E3%83%BC%E3%83%AB-LAM35689-large/dp/B09Z9819W8?th=1&psc=1&linkCode=ll1&tag=${affiliateTag}&linkId=73a356c5cdd0877ce5c98006e49e5d29&language=ja_JP&ref_=as_li_ss_tl`,
        '👆[ニューバランス] インソール サポーティブリバウンドインソール（中敷き）',
        'アマゾンランキング1位で、色々な動画等でも紹介されているインソールです！🦶',
        'どんな靴にでも入れることができて、本当に楽になるのでおすすめです！😆',
        '🦶　👟　🦶　👟　🦶　👟　🦶　👟　🦶　👟　🦶　👟　🦶　👟　🦶',
        '',
      ].join('\n'),

      [
        '',
        '💪　🥤　💪　🥤　💪　🥤　💪　🥤　💪　🥤　💪　🥤　💪　🥤　💪',
        `https://www.amazon.co.jp/REYS-%E3%83%93%E3%82%BF%E3%83%9F%E3%83%B37%E7%A8%AE%E9%85%8D%E5%90%88-WPC%E3%83%97%E3%83%AD%E3%83%86%E3%82%A4%E3%83%B3-%E3%83%9B%E3%82%A8%E3%82%A4%E3%83%97%E3%83%AD%E3%83%86%E3%82%A4%E3%83%B3%E2%80%A6-%E3%82%AB%E3%83%95%E3%82%A7%E3%82%AA%E3%83%AC%E9%A2%A8%E5%91%B3/dp/B0C6X64277?th=1&linkCode=ll1&tag=${affiliateTag}&linkId=86d2a48af35b994616d8505d02adbef9&language=ja_JP&ref_=as_li_ss_tl`,
        '👆REYS レイズ ホエイ プロテイン',
        'アマゾンランキング1位をキープしているプロテインです！💪',
        'タンパク質を効率的に摂取できて、すごく美味しかったのでおすすめです！😆',
        '飲みやすい点も続けやすく、コスパも良いのでおすすめです！🉐',
        '💪　🥤　💪　🥤　💪　🥤　💪　🥤　💪　🥤　💪　🥤　💪　🥤　💪',
        '',
      ].join('\n'),

      [
        '',
        '🍯　🐝　🍯　🐝　🍯　🐝　🍯　🐝　🍯　🐝　🍯　🐝　🍯　🐝　🍯',
        `https://www.amazon.co.jp/MY-HONEY-%E3%82%A2%E3%82%AB%E3%82%B7%E3%82%A2%E3%83%8F%E3%83%8B%E3%83%BC-%E3%83%81%E3%83%A5%E3%83%BC%E3%83%96%E3%83%9C%E3%83%88%E3%83%AB-300g/dp/B07JF3QB6Z?th=1&linkCode=ll1&tag=${affiliateTag}&linkId=55b6fddb427e2b730b35792a23313980&language=ja_JP&ref_=as_li_ss_tl`,
        '👆ハチミツ 非加熱 はちみつ アカシアハニー',
        '「はちみつ」の驚きのパワー🍯✨ 180種以上の栄養素で美肌・免疫力UP💪！ ',
        '抗菌作用で風邪をブロックしてくれます！ほんとに体調がよくなるので試してみて！',
        '消化にも優しい😊 しかも低GIなのでダイエット中でも安心です👍💖',
        '🍯　🐝　🍯　🐝　🍯　🐝　🍯　🐝　🍯　🐝　🍯　🐝　🍯　🐝　🍯',
        '',
      ].join('\n'),

      [
        '',
        '🍞　❤️‍🩹　🍞　❤️‍🩹　🍞　❤️‍🩹　🍞　❤️‍🩹　🍞　❤️‍🩹　🍞　❤️‍🩹　🍞　❤️‍🩹　🍞',
        `https://www.amazon.co.jp/%E3%80%90%E7%B3%96%E8%B3%AA%E3%82%AA%E3%83%95%E3%81%AE%E8%B1%86%E7%B2%89%E3%83%91%E3%83%B3%E3%80%91ZENB-%E3%81%8F%E3%82%8B%E3%81%BF%EF%BC%86%E3%83%AC%E3%83%BC%E3%82%BA%E3%83%B3%E3%83%BB%E3%82%AB%E3%82%AB%E3%82%AA%E3%83%BB3%E7%A8%AE%E3%81%AE%E9%9B%91%E7%A9%80-%E3%82%B0%E3%83%AB%E3%83%86%E3%83%B3%E3%83%95%E3%83%AA%E3%83%BC-%E7%B3%96%E8%B3%AA%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB-%E5%B0%8F%E8%85%B9%E3%81%8C%E3%81%99%E3%81%84%E3%81%9F%E6%99%82%E3%81%AB%E9%A3%9F%E3%81%B9%E3%82%8B/dp/B0CNJY25CZ?th=1&linkCode=ll1&tag=${affiliateTag}&linkId=cd51fed6af48c72acc6bbc3363523dce&language=ja_JP&ref_=as_li_ss_tl`,
        '👆【糖質オフの豆粉パン】ZENB ゼンブ ブレッド グルテンフリー',
        'アマゾンランキング1位で、非常に人気の豆粉パンです🤩',
        'グルテンフリー＆低糖質で体に優しいです！🍞✨ 食物繊維たっぷりだから、健康もサポートしてくれます💪😊',
        'しかも、めちゃくちゃ美味しい😋ので無理なく続けられます😊',
         'ダイエットや健康志向の方に、ぜひ試してほしい逸品です👍',
        '🍞　❤️‍🩹　🍞　❤️‍🩹　🍞　❤️‍🩹　🍞　❤️‍🩹　🍞　❤️‍🩹　🍞　❤️‍🩹　🍞　❤️‍🩹　🍞',
        '',
      ].join('\n'),

      [
        '',
        '🍜　🥢　🍜　🥢　🍜　🥢　🍜　🥢　🍜　🥢　🍜　🥢　🍜　🥢　🍜',
        `https://www.amazon.co.jp/%E3%82%B0%E3%83%AB%E3%83%86%E3%83%B3%E3%83%95%E3%83%AA%E3%83%BC-%E3%80%91ZENB-%E3%83%9F%E3%83%BC%E3%83%AB%E3%82%AD%E3%83%83%E3%83%88-%E7%B3%96%E8%B3%AA%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB-%E6%99%82%E3%81%AE%E6%A0%84%E9%A4%8A%E8%A3%9C%E7%B5%A6%E3%81%AB/dp/B0C7QLCNLJ?th=1&linkCode=ll1&tag=${affiliateTag}&linkId=0a97c60a1350ca0b83c5c50ba42a4f9c&language=ja_JP&ref_=as_li_ss_tl`,
        '👆【 グルテンフリー ラーメン 】ZENB ゼンブ ラーメン',
        '罪悪感なしで食べれるラーメン✨なので続けられます！😁',
        'スーパーフード黄えんどう豆の麺で、脂質50%・糖質25%オフなので超ヘルシー🍜',
        'たんぱく質・食物繊維たっぷり＆グルテンフリーで体にも超いいです💪😊',
        '🍜　🥢　🍜　🥢　🍜　🥢　🍜　🥢　🍜　🥢　🍜　🥢　🍜　🥢　🍜',
        '',
      ].join('\n'),

      [
        '',
        '🛑　🍯　🛑　🍯　🛑　🍯　🛑　🍯　🛑　🍯　🛑　🍯　🛑　🍯　🛑',
        `https://www.amazon.co.jp/%E3%80%90%E3%83%9F%E3%83%8D%E3%83%A9%E3%83%AB%E3%81%9F%E3%81%A3%E3%81%B7%E3%82%8A%E5%A4%A7%E7%B2%92-%E5%AE%8C%E7%86%9F%E6%B8%A9%E6%B3%89%E6%A2%85-%E5%A1%A9%E5%88%863-%E3%80%91%E7%B4%80%E5%B7%9E%E5%8D%97%E9%AB%98%E6%A2%85-%E6%B8%9B%E5%A1%A9%E3%81%AF%E3%81%A1%E3%81%BF%E3%81%A4%E5%91%B3-500g%C3%972%E5%80%8B/dp/B07GY9YPFC?th=1&linkCode=ll1&tag=${affiliateTag}&linkId=54bf1a6f2e2484562c4f853f13b6fa58&language=ja_JP&ref_=as_li_ss_tl`,
        '👆大粒 完熟南高梅【上品な甘み 減塩はちみつ 塩分3%】アマゾンランキング上位',
        'とにかく美味しいです✨笑 塩分3%の減塩だから体に優しく、クエン酸で疲労回復も完璧です😊',
        '有機酸で腸内環境も整え、バニリンでダイエットまで応援する優秀さです💖',
        '大粒で柔らかい完熟南高梅を食べて、美味しく健康になりましょう！👍',
        '🛑　🍯　🛑　🍯　🛑　🍯　🛑　🍯　🛑　🍯　🛑　🍯　🛑　🍯　🛑',
        '',
      ].join('\n'),

      [
        '',
        '🥣　🉐　🥣　🉐　🥣　🉐　🥣　🉐　🥣　🉐　🥣　🉐　🥣　🉐　🥣',
        `https://www.amazon.co.jp/%E3%80%90Amazon-co-jp%E9%99%90%E5%AE%9A%E3%80%91-%E3%82%B1%E3%83%AD%E3%83%83%E3%82%B0-%E7%B2%92%E6%84%9F%E3%81%97%E3%81%A3%E3%81%8B%E3%82%8A-%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9F%E3%83%BC%E3%83%AB%E3%81%94%E3%81%AF%E3%82%93-900g/dp/B0BVYG4YGW?th=1&linkCode=ll1&tag=${affiliateTag}&linkId=1cc51cfe6b3f36883eeca0f9ff97b396&language=ja_JP&ref_=as_li_ss_tl`,
        '👆ケロッグ 粒感しっかり オートミールごはん',
        '発酵性食物繊維がたっぷりだから、便秘解消＆腸活を徹底サポートしてくれます💪😊',
        '血糖値やコレステロール値の調整、さらに鉄分・ビタミンも補給できる最強ヘルシー食材！😁',
        'お米が高騰中の今、節約しながらダイエットと健康を手に入れてみましょう🉐',
        '🥣　🉐　🥣　🉐　🥣　🉐　🥣　🉐　🥣　🉐　🥣　🉐　🥣　🉐　🥣',
        '',
      ].join('\n'),

      [
        '',
        '🍣　🐟　🍣　🐟　🍣　🐟　🍣　🐟　🍣　🐟　🍣　🐟　🍣　🐟　🍣',
        `https://www.amazon.co.jp/%E5%BA%83%E6%B4%8B%E6%B0%B4%E7%94%A3-%E3%81%84%E3%81%8F%E3%82%89%E9%86%A4%E6%B2%B9%E6%BC%AC%E3%81%91-400g%EF%BC%88200g%C3%972%EF%BC%89-%E5%8C%97%E6%B5%B7%E9%81%93-%E7%99%BD%E7%B3%A0%E7%94%BA/dp/B0DM6LH73H?th=1&linkCode=ll1&tag=${affiliateTag}&linkId=e86ef59b02580e681e2001337aa6e3b8&language=ja_JP&ref_=as_li_ss_tl`,
        '👆北海道 いくら 醤油漬け ',
        '「生きてて良かった」と思えます😆笑 自分への最高のご褒美に🎉',
        'いくらはDHA・EPAなど良質な栄養素の宝庫なんです🍣',
        '脳の機能向上や心臓の健康をサポートし、美肌効果や免疫力UPも期待できる💪😊',
        '🍣　🐟　🍣　🐟　🍣　🐟　🍣　🐟　🍣　🐟　🍣　🐟　🍣　🐟　🍣',
        '',
      ].join('\n'),

      [
        '',
        '🥜　🌰　🥜　🌰　🥜　🌰　🥜　🌰　🥜　🌰　🥜　🌰　🥜　🌰　🥜',
        `https://www.amazon.co.jp/Amazon%E3%83%96%E3%83%A9%E3%83%B3%E3%83%89-Happy-Belly-%E7%B4%A0%E7%84%BC%E3%81%8D%E3%83%9F%E3%83%83%E3%82%AF%E3%82%B9%E3%83%8A%E3%83%83%E3%83%84-22g%C3%9730%E8%A2%8B/dp/B09J45Z72R?th=1&linkCode=ll1&tag=${affiliateTag}&linkId=3cb0aa4ae449919fc5beee2dc4d349bc&language=ja_JP&ref_=as_li_ss_tl`,
        '👆素焼きミックスナッツ アーモンド カシューナッツ クルミ 22g×30袋 個包装',
        '一袋たった約80円でこの栄養！🥜✨',
        'アーモンドでビタミンEを補給、カシューナッツで疲労回復＆骨の健康をサポート💪😊 クルミのオメガ3が脳の健康に貢献します😆',
        '最強の健康おやつなんです💖 美味しい個包装ミックスナッツで、毎日手軽に健康習慣を始めてみませんか？👍',
        '🥜　🌰　🥜　🌰　🥜　🌰　🥜　🌰　🥜　🌰　🥜　🌰　🥜　🌰　🥜',
        '',
      ].join('\n'),
      // ーーーリンクの形式をIDが含まれるものに変更ーーーーーーーーー
    ];

    // マガジン誘導文（参考実装の体裁を反映）
    const magazinePromotion = [];

    // const magazinePromotion = [
    //   '🐈　🐾　🐈‍⬛　🐾　🐈　🐾　🐈‍⬛　🐾　🐈　🐾　🐈‍⬛　🐾　🐈　🐾　🐈‍⬛　',
    //   '',
    //   '✅「物理的に幸せになるおすすめグッズ達」',
    //   '',
    //   '私が皆さんにおすすめしているコスパ抜群のグッズをご紹介しています！',
    //   '効果テキメンなので皆さん試してみていただけると幸いです😊',
    //   '',
    //   '【コスパ抜群の幸せグッズ】',
    //   '✔ 効果テキメンのアイテム',
    //   '✔ 実際に使って良かったもの',
    //   'そんなグッズを厳選してご紹介。',
    //   '',
    //   'ぜひ試してみてください！',
    //   '',
    //   'https://note.com/counselor_risa/m/m72a580a7e712',
    //   '',
    //   '🐈　🐾　🐈‍⬛　🐾　🐈　🐾　🐈‍⬛　🐾　🐈　🐾　🐈‍⬛　🐾　🐈　🐾　🐈‍⬛　',
    //   '',
    // ].join('\n');

    // アソシエイト表記文（参考実装の文言）
    const amazonAssociateText =
      'Amazon のアソシエイトとして、「🌙こころ診断ラボ💕心理テスト💕」は適格販売により収入を得ています。';

    // 記事の自動生成と下書き保存機能を実行
    await core.runAutoCreateAndDraftNote({
      background: wantsBackground,
      topics,
      patterns,
      systemMessage,
      articleConditionsLines,
      rewriteConditionsLines,
      tagsInstruction,
      titleEmojis,
      // affiliateLink
      affiliateLinks,
      magazinePromotion,
      amazonAssociateText,
      // Audible・Kindleアフィリエイト設定
      affiliateTag,
      audibleAffiliateEnabled: true,
      kindleAffiliateEnabled,
    });
    console.log('記事の自動生成と下書き保存が完了しました');
  });
})();
